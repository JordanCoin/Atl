{
  "id": "cart-flow-bestbuy",
  "name": "Best Buy Cart Flow",
  "version": "1.0",
  "description": "Add product to cart at Best Buy",
  "profile": "cart-test",
  "extractionVersion": "v2",
  "product": {
    "name": "USB-C Cable",
    "searchQuery": "usb c cable",
    "description": "USB Type-C charging cable product listing",
    "clipVerification": true
  },
  "store": {
    "id": "bestbuy",
    "name": "Best Buy",
    "baseUrl": "https://www.bestbuy.com",
    "searchUrl": "https://www.bestbuy.com/site/searchpage.jsp?st={query}",
    "cartUrl": "https://www.bestbuy.com/cart"
  },
  "steps": [
    {
      "id": "search",
      "name": "Search Results",
      "action": "goto",
      "pageType": "search_results",
      "pageValidation": {
        "urlContains": ["bestbuy.com"],
        "titleNotContains": ["Sign In", "Error"]
      },
      "selectors": {
        "productLinks": ".sku-item a.image-link",
        "resultCount": ".result-count"
      },
      "clipPrompt": "Best Buy search results page with product grid"
    },
    {
      "id": "product",
      "name": "Product Page",
      "action": "click",
      "target": ".sku-item a.image-link",
      "fallbackTarget": "a[href*='/site/']",
      "pageType": "product",
      "pageValidation": {
        "urlContains": ["/site/"],
        "titleNotContains": ["Sign In", "Error"]
      },
      "selectors": {
        "title": ".sku-title h1",
        "price": ".priceView-customer-price span",
        "addToCart": ".add-to-cart-button",
        "availability": ".fulfillment-add-to-cart-button"
      },
      "clipPrompt": "Best Buy product page with blue Add to Cart button"
    },
    {
      "id": "add-to-cart",
      "name": "Add to Cart",
      "action": "click",
      "target": ".add-to-cart-button",
      "fallbackTarget": "[data-button-state='ADD_TO_CART']",
      "pageType": "confirmation",
      "selectors": {
        "confirmation": ".added-to-cart-modal, .cart-confirmation"
      }
    },
    {
      "id": "cart",
      "name": "Cart Page",
      "action": "goto",
      "url": "https://www.bestbuy.com/cart",
      "pageType": "cart",
      "pageValidation": {
        "urlContains": ["cart"],
        "titleContains": ["Cart"],
        "titleNotContains": ["Sign In", "Error"]
      },
      "selectors": {
        "cartItems": ".cart-item",
        "subtotal": ".order-summary__price",
        "checkout": ".checkout-buttons__checkout"
      },
      "clipPrompt": "Best Buy shopping cart page with items and checkout button"
    }
  ],
  "trainingLabels": {
    "search_results": {"hasProductGrid": true, "hasBuyButton": false},
    "product": {"hasProductGrid": false, "hasBuyButton": true},
    "cart": {"hasCheckoutButton": true, "hasBuyButton": false}
  }
}
